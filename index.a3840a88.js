const boxes=JSON.parse(localStorage.getItem("boxes"))||[],btnAdd=document.querySelector(".btn-submit"),boxNumContainer=document.querySelector(".box-num"),itemsText=document.querySelector(".textarea"),boxesContainer=document.querySelector(".boxes__container"),btnSearch=document.querySelector(".search-btn"),inputSearch=document.querySelector(".search-input"),btnDellall=document.querySelector(".dell-all"),btnPrint=document.querySelector(".print-btn"),userIconContainer=document.querySelector(".user-icon-container"),userIcon=document.querySelector(".user-icon"),userIconText=document.querySelector(".user-icon-text"),checkbox=document.querySelector(".toggle-checkbox");boxNumContainer.firstElementChild.textContent=boxes.at(-1)?.number+1||1;const svgEditSrc=document.querySelector(".box-num-edit-img").getAttribute("src"),svgEdit=`<img class="box-num-edit-img" src="${svgEditSrc}" alt="edit box title">`;let autoNum=JSON.parse(localStorage.getItem("autoNum"))??!0;checkbox.checked=!!autoNum;const localsaveBoxes=function(){localStorage.setItem("boxes",JSON.stringify(boxes)),localStorage.setItem("autoNum",autoNum)},boxNumEditable=function(e){const t=[...document.getElementsByClassName("box-num-edit-img")];return e?t.forEach((e=>{e.style.display="none"})):(autoNum=!1,t.forEach((e=>{e.style.display="flex"}))),t};boxNumEditable(autoNum);const boxMaker=function(e,t,n){return`\n<article class="box" data-index="${e}">\n  <div class="box-num ss02"><span>${t||e}</span>\n    ${svgEdit}\n  </div>\n  <div class="items">\n    <ul class='list ss02'>\n      ${n}\n    </ul>\n  </div>\n  <div class="control">\n    <button class="box__btn btn-remove">حذف</button>\n    <button class="box__btn btn-edit box-edit">ویرایش</button>\n  </div>\n</article>\n`},itemsOrganizer=function(e){return e.split("\n").filter((e=>{if(e.trim())return e})).map((e=>{if(e)return e.trim()}))},itemsHTML=e=>e.map((e=>`<li>${e}</li>`)).join("\n"),boxesUpdate=function(){boxesContainer.innerHTML="",boxes.forEach(((e,t)=>{let n=itemsHTML(e.items);boxesContainer.insertAdjacentHTML("beforeend",boxMaker(e.number,e.title,n))})),boxNumEditable(autoNum),localsaveBoxes()};boxesUpdate(),btnAdd.addEventListener("click",(function(e){if(e.preventDefault(),!itemsText.value)return;const t=e.target.parentElement.querySelector(".title")?.textContent,n=itemsOrganizer(itemsText.value),o=boxes.at(-1)?.number+1||1;itemsText.value="",boxes.push({number:o,title:t,items:n}),boxesUpdate(),localsaveBoxes(),boxNumContainer.firstElementChild.textContent=boxes.at(-1)?.number+1||1})),boxesContainer.addEventListener("click",(function(e){if(!e.target.classList.contains("box-edit"))return;e.preventDefault(),e.target.classList.toggle("box-edit");const t=e.target.closest(".box"),n=+t.dataset.index,o=t.querySelector(".items");let s;boxes.forEach(((e,t,o)=>{e.number===n&&(s=t)}));const i=document.createElement("div");i.classList.add("edit__container");const a=document.createElement("textarea");a.textContent=boxes[s].items.join("\n"),a.classList.add("textarea","edit-textarea","ss02"),o.firstElementChild.style.display="none",o.style.margin="1rem";const r=document.createElement("button");r.textContent="ثبت",r.classList.add("btn","btn-submit","raise","btn-edit-set"),i.append(a,r),o.append(i)})),boxesContainer.addEventListener("click",(function(e){if(!e.target.classList.contains("btn-edit-set"))return;e.preventDefault();const t=e.target.closest(".box"),n=+t.dataset.index,o=t.querySelector(".items"),s=t.querySelector(".edit__container");let i;boxes.forEach(((e,t,o)=>{e.number===n&&(i=t)})),t.querySelector(".btn-edit").classList.toggle("box-edit");const a=boxes[i].items=itemsOrganizer(e.target.previousElementSibling.value);o.firstElementChild.innerHTML=itemsHTML(a),s.remove(),o.firstElementChild.style.display="initial",o.style.marginTop="2rem",o.style.marginRight="3.5rem",localsaveBoxes()})),boxesContainer.addEventListener("click",(function(e){if(e.target.classList.contains("btn-remove")&&(e.preventDefault(),confirm("آیا از حذف باکس اطمینان دارید؟"))){const t=+e.target.closest(".box").dataset.index;boxes.forEach(((e,n,o)=>{e.number===t&&o.splice(n,1)})),boxesUpdate(),localsaveBoxes(),boxNumContainer.firstElementChild.textContent=boxes.at(-1)?.number+1||1}})),btnSearch.addEventListener("click",(function(e){e.preventDefault();const t=[];boxes.forEach(((e,n,o)=>{e.items.some((e=>e.includes(inputSearch.value)))&&t.push(o[n])})),boxesContainer.innerHTML="",t.forEach((e=>{let t=e.items.map((e=>`<li>${e}</li>`)).join("\n");boxesContainer.insertAdjacentHTML("beforeend",boxMaker(e.number,e.title,t)),boxNumEditable(autoNum)}))})),inputSearch.addEventListener("input",(function(e){const t=[];boxes.forEach(((e,n,o)=>{e.items.some((e=>e.includes(inputSearch.value)))&&t.push(o[n])})),boxesContainer.innerHTML="",t.forEach((e=>{let t=e.items.map((e=>`<li>${e}</li>`)).join("\n");boxesContainer.insertAdjacentHTML("beforeend",boxMaker(e.number,e.title,t)),boxNumEditable(autoNum)}))})),btnDellall.addEventListener("click",(function(e){e.preventDefault(),confirm("آیا از حذف همه اطمینان دارید؟")&&(boxes.length=0,boxesUpdate(),localsaveBoxes(),boxNumContainer.firstElementChild.textContent=1)})),btnPrint.addEventListener("click",(function(e){e.preventDefault();const t=document.querySelector(".finalPrint");t&&t.remove();const n=boxesContainer.cloneNode(),o=boxesContainer.cloneNode(!0);o.classList.add("printClone"),n.classList.add("finalPrint"),[...o.children].forEach(((e,t,o)=>{const s=document.createElement("div");t%2==0&&(o[t+1]?(s.append(o[t],o[t+1]),n.append(s)):(s.append(o[t]),n.append(s)))})),boxesContainer.insertAdjacentElement("afterend",n),[...n.children].forEach((e=>{[...e.children].forEach(((e,t,n)=>{if(n[0]&&n[1]){const e=parseFloat(getComputedStyle(n[0])?.height),t=parseFloat(getComputedStyle(n[1])?.height);e&&t&&e!==t&&(e>t?n[1].style.height=e-39+"px":n[0].style.height=t-39+"px")}}))})),window.print()})),userIcon.addEventListener("mouseenter",(function(e){userIconText.style.opacity="100"})),userIcon.addEventListener("mouseleave",(function(e){userIconText.style.opacity="0"}));const modal=document.querySelector(".auth-window"),overlay=document.querySelector(".overlay"),btnCloseModal=document.querySelector(".close-modal"),signinForm=document.querySelector(".signin"),signupForm=document.querySelector(".signup"),formsContainer=document.querySelector(".forms"),signinFormBtn=document.querySelector(".signin-form-btn"),signupFormBtn=document.querySelector(".signup-form-btn"),openModal=function(){modal.classList.remove("hidden"),overlay.classList.remove("hidden"),document.body.style.height="100vh",document.body.style.overflow="hidden"};userIcon.addEventListener("click",openModal);const closeModal=function(){modal.classList.add("hidden"),overlay.classList.add("hidden"),document.body.style.height="auto",document.body.style.overflow="auto"};btnCloseModal.addEventListener("click",closeModal),overlay.addEventListener("click",closeModal),document.addEventListener("keydown",(function(e){"Escape"!==e.key||modal.classList.contains("hidden")||closeModal()})),signinForm.addEventListener("submit",(function(e){e.preventDefault();this.email.value,this.password.value})),signupForm.addEventListener("submit",(function(e){e.preventDefault();this.email.value,this.password.value,this.passRepeat.value})),signupFormBtn.addEventListener("click",(function(e){e.preventDefault(),signupFormBtn.classList.add("auth-selected"),signinFormBtn.classList.remove("auth-selected"),signupForm.style.transform="translateX(0)",signinForm.style.transform="translateX(100%)",formsContainer.style.height="400px"})),signinFormBtn.addEventListener("click",(function(e){e.preventDefault(),signupFormBtn.classList.remove("auth-selected"),signinFormBtn.classList.add("auth-selected"),signupForm.style.transform="translateX(-100%)",signinForm.style.transform="translateX(0)",formsContainer.style.height="310px"})),formsContainer.addEventListener("click",(function(e){if(!e.target.classList.contains("curser-area"))return;const t=e.target.previousElementSibling,n=e.target.nextElementSibling,o=n.nextElementSibling,s="password"===t.getAttribute("type")?"text":"password";t.setAttribute("type",s),n.classList.contains("hidden")?(n.classList.remove("hidden"),o.classList.add("hidden")):(n.classList.add("hidden"),o.classList.remove("hidden"))})),checkbox.addEventListener("click",(function(e){const t=boxNumEditable();!0!==this.checked?(autoNum=!1,localStorage.setItem("autoNum",JSON.stringify(autoNum)),t.forEach((e=>{e.style.display="flex"}))):(autoNum=!0,localStorage.setItem("autoNum",JSON.stringify(autoNum)),t.forEach((e=>{e.style.display="none"})),boxNumContainer.firstElementChild.textContent=boxes.at(-1)?.number+1||1,boxesUpdate())}));const mainContainer=document.querySelector(".main-container");mainContainer.addEventListener("click",(function(e){if(!e.target.classList.contains("box-num-edit-img"))return;const t=e.target.previousElementSibling.textContent,n=document.createElement("div");n.classList.add("box-naming-input-container");const o=document.createElement("input");o.type="text",o.id="box-naming-input",o.classList.add("search-input","box-naming-input","ss02"),o.value=t;const s=document.createElement("button");s.textContent="ثبت",s.classList.add("search-btn","box-naming-btn"),n.append(o,s),e.target.previousElementSibling.replaceWith(n),e.target.style.display="none",o.focus(),o.select()})),mainContainer.addEventListener("click",(function(e){if(!e.target.classList.contains("box-naming-btn"))return;e.preventDefault();const t=e.target.previousElementSibling.value,n=document.createElement("span"),o=+e.target.closest(".box")?.dataset?.index;if(n.classList.add("title"),n.textContent=t,e.target.parentElement.replaceWith(n),boxNumEditable(autoNum),o){let e;boxes.forEach(((t,n,s)=>{t.number===o&&(e=n)})),boxes[e].title=t,localsaveBoxes()}}));
//# sourceMappingURL=index.a3840a88.js.map
